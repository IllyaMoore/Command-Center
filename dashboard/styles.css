/* ===================================================
   DESIGN SYSTEM
   Aesthetic: Military-precision operations dashboard
   Palette: Warm neutrals + signal colors
   Typography: Fraunces (display) + DM Sans (body) + IBM Plex Mono (data)
   =================================================== */
:root {
  --bg: #f7f6f3;
  --s: #ffffff;
  --s2: #f0eeea;
  --s3: #e4e1db;
  --b: #d6d3cc;
  --b2: #c2bfb8;
  --t: #1c1917;
  --t2: #57534e;
  --t3: #a8a29e;
  --g: #16a34a;
  --gd: rgba(22,163,74,.06);
  --gg: rgba(22,163,74,.15);
  --r: #dc2626;
  --rd: rgba(220,38,38,.06);
  --a: #d97706;
  --ad: rgba(217,119,6,.06);
  --bl: #2563eb;
  --bld: rgba(37,99,235,.06);
  --p: #7c3aed;
  --pd: rgba(124,58,237,.06);
  --tl: #0d9488;
  --tld: rgba(13,148,136,.06);
  --font: 'DM Sans', -apple-system, sans-serif;
  --mono: 'IBM Plex Mono', monospace;
  --display: 'Fraunces', Georgia, serif;
  --sh: 0 1px 2px rgba(0,0,0,.04);
  --shm: 0 4px 12px rgba(0,0,0,.06);
  --rad: 8px;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html, body { height:100%; overflow:hidden; }
body { font-family:var(--font); background:var(--bg); color:var(--t); font-size:13px; line-height:1.5; -webkit-font-smoothing:antialiased; }

/* === LAYOUT SHELL === */
.app { display:flex; flex-direction:column; height:100vh; overflow:hidden; }

/* TOPBAR */
.topbar {
  display:flex; align-items:center; justify-content:space-between;
  padding:0 16px; height:48px; background:var(--s);
  border-bottom:1px solid var(--b); flex-shrink:0; z-index:100;
}
.tb-left { display:flex; align-items:center; gap:10px; }
.brand { font-family:var(--display); font-weight:700; font-size:16px; letter-spacing:-.3px; }
.brand em { font-style:normal; color:var(--t3); font-weight:500; font-size:12px; margin-left:3px; }
.status-pill {
  display:flex; align-items:center; gap:5px;
  padding:3px 10px; background:var(--gd); border:1px solid rgba(22,163,74,.12);
  border-radius:20px; font-size:10px; font-family:var(--mono); color:var(--g); font-weight:500;
}
.pulse { width:6px; height:6px; border-radius:50%; background:var(--g); animation:pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.25} }

/* Desktop/Tablet tabs in topbar */
.tb-tabs { display:none; }
@media(min-width:768px) and (max-width:1023px) {
  .tb-tabs { display:flex; gap:2px; background:var(--s2); border-radius:6px; padding:2px; }
  .tb-tabs button { padding:4px 16px; border:none; background:none; font-family:var(--font); font-size:11px; font-weight:600; color:var(--t3); border-radius:4px; cursor:pointer; transition:.12s; }
  .tb-tabs button.on { background:var(--s); color:var(--t); box-shadow:var(--sh); }
}

.tb-right { display:flex; align-items:center; gap:8px; }
.clock { font-family:var(--mono); font-size:11px; color:var(--t2); }
.avatar {
  width:30px; height:30px; border-radius:50%;
  background:linear-gradient(135deg, var(--g), var(--tl));
  display:flex; align-items:center; justify-content:center;
  font-size:10px; font-weight:700; color:#fff;
}
.tb-icon {
  width:32px; height:32px; border:1px solid var(--b); background:var(--s);
  border-radius:var(--rad); cursor:pointer; display:flex; align-items:center;
  justify-content:center; font-size:14px; transition:.12s;
}
.tb-icon:hover { border-color:var(--g); color:var(--g); }
.settings-btn { display:none; }
@media(max-width:767px) { .settings-btn { display:flex; } }

/* ===================================================
   DESKTOP LAYOUT (>=1024px)
   [Calendar] [Activity Feed] [Chat Panel]
   =================================================== */
.workspace { flex:1; display:grid; overflow:hidden; grid-template-columns:1fr; }

@media(min-width:1024px) {
  .workspace { grid-template-columns:1fr 1fr 340px; }
  .mobile-nav { display:none !important; }
}

/* ===================================================
   TABLET LAYOUT (768-1023px)
   [Calendar OR Activity] [Chat Panel]
   =================================================== */
@media(min-width:768px) and (max-width:1023px) {
  .workspace { grid-template-columns:1fr 300px; }
  .act-pane { display:none; }
  .act-pane.tablet-show { display:flex; }
  .cal-pane.tablet-hide { display:none; }
  .mobile-nav { display:none !important; }
}

/* ===================================================
   MOBILE LAYOUT (<768px)
   Full-screen views + bottom nav + chat popup
   =================================================== */
@media(max-width:767px) {
  .workspace { grid-template-columns:1fr; }
  .act-pane { display:none; }
  .act-pane.mobile-show { display:flex; }
  .cal-pane.mobile-hide { display:none; }
  .chat-pane { display:none !important; }
}

/* === PANE SHARED === */
.pane { display:flex; flex-direction:column; overflow:hidden; }
.pane-head {
  display:flex; align-items:center; justify-content:space-between;
  padding:8px 14px; border-bottom:1px solid var(--b);
  background:var(--s); flex-shrink:0;
}
.pane-title { font-size:12px; font-weight:700; display:flex; align-items:center; gap:6px; letter-spacing:.3px; }
.pane-toggle {
  display:flex; gap:2px; background:var(--s2); border-radius:6px; padding:2px;
}
.pane-toggle button {
  padding:3px 12px; border:none; background:none;
  font-family:var(--font); font-size:10px; font-weight:600;
  color:var(--t3); border-radius:4px; cursor:pointer; transition:.12s;
}
.pane-toggle button.on { background:var(--s); color:var(--t); box-shadow:var(--sh); }
.pane-scroll { flex:1; overflow-y:auto; padding:12px; -webkit-overflow-scrolling:touch; }

/* === CALENDAR PANE === */
.cal-pane { border-right:1px solid var(--b); }
@media(max-width:767px) { .cal-pane { border-right:none; } }

/* CEO Brief */
.brief {
  padding:10px 12px; border:1px solid rgba(22,163,74,.1);
  border-radius:var(--rad); margin-bottom:10px; position:relative;
  background:linear-gradient(135deg,rgba(22,163,74,.03),rgba(22,163,74,.01));
}
.brief::before { content:''; position:absolute; left:0; top:5px; width:3px; height:calc(100% - 10px); background:var(--g); border-radius:0 2px 2px 0; }
.brief-tag { font-family:var(--mono); font-size:8px; font-weight:600; letter-spacing:1px; text-transform:uppercase; color:var(--g); margin-bottom:3px; }
.brief p { font-size:12px; line-height:1.6; }
.brief strong { color:var(--g); }

/* Time divider */
.time-div { display:flex; align-items:center; gap:6px; padding:10px 0 4px; }
.time-div .td-label { font-size:9px; font-weight:700; letter-spacing:.7px; text-transform:uppercase; color:var(--t3); white-space:nowrap; }
.time-div .td-line { flex:1; height:1px; background:var(--b); }
.time-div .td-time { font-family:var(--mono); font-size:9px; color:var(--t3); white-space:nowrap; }

/* Event/Task cards */
.event {
  display:flex; align-items:center; gap:8px; padding:8px 10px; margin-bottom:2px;
  border-radius:var(--rad); background:var(--s); border:1px solid transparent;
  transition:.15s; box-shadow:var(--sh); cursor:default;
}
.event:hover { border-color:var(--b); transform:translateY(-1px); box-shadow:var(--shm); }
.event-bar { width:3px; height:26px; border-radius:3px; flex-shrink:0; }
.event-body { flex:1; min-width:0; }
.event-name { font-size:12px; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.event-meta { display:flex; align-items:center; gap:4px; margin-top:1px; font-size:9px; color:var(--t3); flex-wrap:wrap; }
.event-time { font-family:var(--mono); font-size:10px; font-weight:500; color:var(--t2); background:var(--s2); padding:2px 5px; border-radius:4px; }

/* Weekly view */
.wk-view { display:none; }
.wk-view.vis { display:block; }
.day-view.hid { display:none; }
.wk-grid { display:grid; grid-template-columns:repeat(7,1fr); gap:4px; }
@media(max-width:900px) { .wk-grid { grid-template-columns:repeat(4,1fr); } }
@media(max-width:500px) { .wk-grid { grid-template-columns:repeat(2,1fr); } }
.wk-col { background:var(--s); border:1px solid var(--b); border-radius:6px; overflow:hidden; box-shadow:var(--sh); }
.wk-col.today { border-color:var(--g); box-shadow:0 0 0 1px var(--gd); }
.wk-head { padding:5px; text-align:center; border-bottom:1px solid var(--b); }
.wk-head .wd { font-size:8px; font-weight:700; letter-spacing:.5px; text-transform:uppercase; color:var(--t3); }
.wk-col.today .wd { color:var(--g); }
.wk-head .wn { font-family:var(--mono); font-size:14px; font-weight:700; }
.wk-col.today .wn { color:var(--g); }
.wk-head .wh { font-family:var(--mono); font-size:8px; color:var(--t3); }
.wk-body { padding:2px; max-height:320px; overflow-y:auto; display:flex; flex-direction:column; gap:2px; }
.wk-event { display:flex; align-items:center; gap:3px; padding:2px 3px; font-size:8px; background:rgba(22,163,74,.05); border-left:2px solid var(--g); border-radius:2px; margin-bottom:1px; }
.wk-event .wk-et { font-family:var(--mono); font-size:6px; color:var(--g); }

/* === ACTIVITY PANE === */
.act-pane { border-right:1px solid var(--b); }
@media(max-width:767px) { .act-pane { border-right:none; } }

/* Agent pills */
.pills { display:flex; gap:3px; flex-wrap:wrap; margin-bottom:10px; }
.pill {
  padding:4px 10px; border:1px solid var(--b); border-radius:20px;
  font-size:10px; font-weight:600; cursor:pointer; transition:.12s;
  background:var(--s); display:flex; align-items:center; gap:4px;
}
.pill:hover { border-color:var(--g); }
.pill.on { background:var(--gd); border-color:rgba(22,163,74,.18); color:var(--g); }
.pill-dot { width:6px; height:6px; border-radius:50%; }

/* Agent detail card */
.agent-card {
  display:none; margin-bottom:10px; padding:10px 12px;
  background:var(--s); border:1px solid var(--b); border-radius:var(--rad); box-shadow:var(--sh);
}
.agent-card.vis { display:block; animation:slideDown .2s ease; }
@keyframes slideDown { 0%{opacity:0;transform:translateY(-4px)} 100%{opacity:1;transform:translateY(0)} }

/* Feed items */
.feed-item { display:flex; gap:7px; padding:7px 5px; border-radius:6px; transition:.12s; }
.feed-item:hover { background:var(--s2); }
.fi-dot { width:7px; height:7px; border-radius:50%; margin-top:4px; flex-shrink:0; }
.fi-body { flex:1; min-width:0; }
.fi-text { font-size:11px; line-height:1.5; color:var(--t2); }
.fi-text strong { color:var(--t); }
.fi-time { font-family:var(--mono); font-size:8px; color:var(--t3); margin-top:1px; }
.fi-badge { font-family:var(--mono); font-size:8px; font-weight:600; color:var(--t3); background:var(--s2); padding:1px 5px; border-radius:3px; margin-left:3px; }

/* Loading state */
.loading { text-align:center; padding:20px; color:var(--t3); font-size:11px; }

/* === CHAT PANE (Desktop/Tablet) === */
.chat-pane {
  display:flex; flex-direction:column; background:var(--s);
  border-left:1px solid var(--b); overflow:hidden;
}
.chat-head {
  display:flex; align-items:center; justify-content:space-between;
  padding:8px 14px; border-bottom:1px solid var(--b); flex-shrink:0;
}
.chat-head h3 { font-size:12px; font-weight:700; display:flex; align-items:center; gap:5px; }
.chat-close {
  width:24px; height:24px; border:1px solid var(--b); background:none;
  border-radius:5px; cursor:pointer; font-size:11px;
  display:flex; align-items:center; justify-content:center; color:var(--t3);
}
.chat-close:hover { border-color:var(--r); color:var(--r); }
.chat-msgs { flex:1; overflow-y:auto; padding:10px 12px; display:flex; flex-direction:column; gap:5px; }
.msg {
  max-width:88%; padding:8px 12px; border-radius:14px;
  font-size:12px; line-height:1.55; animation:msgIn .2s ease;
}
@keyframes msgIn { 0%{opacity:0;transform:translateY(4px)} 100%{opacity:1;transform:translateY(0)} }
.msg-u { background:var(--g); color:#fff; align-self:flex-end; border-bottom-right-radius:4px; }
.msg-a { background:var(--s2); color:var(--t); align-self:flex-start; border-bottom-left-radius:4px; }
.msg-a .agent-label { font-size:8px; font-weight:700; color:var(--g); margin-bottom:1px; }
.msg-sys { background:var(--gd); color:var(--g); align-self:center; font-size:9px; font-weight:600; border-radius:5px; padding:3px 8px; }
.chat-input-bar {
  display:flex; gap:5px; padding:8px 12px; border-top:1px solid var(--b); flex-shrink:0;
}
.chat-input-bar input {
  flex:1; padding:9px 14px; background:var(--s2); border:1px solid var(--b);
  border-radius:20px; font-family:var(--font); font-size:12px; color:var(--t); outline:none;
}
.chat-input-bar input:focus { border-color:var(--g); box-shadow:0 0 0 3px var(--gg); }
.send-btn {
  width:36px; height:36px; border:none; border-radius:50%;
  background:var(--g); color:#fff; font-size:15px; cursor:pointer;
  display:flex; align-items:center; justify-content:center; flex-shrink:0; transition:.12s;
}
.send-btn:hover { transform:scale(1.05); }
.send-btn:disabled { background:var(--b2); cursor:not-allowed; }

/* Voice response indicator */
.voice-indicator { display:none; align-items:center; gap:6px; padding:6px 12px; border-top:1px solid var(--b); font-size:10px; color:var(--g); font-weight:600; }
.voice-indicator.active { display:flex; }
.voice-wave { display:flex; gap:2px; align-items:center; }
.voice-wave span { width:3px; border-radius:2px; background:var(--g); animation:wave .6s infinite; }
.voice-wave span:nth-child(1) { height:8px; animation-delay:0s; }
.voice-wave span:nth-child(2) { height:14px; animation-delay:.1s; }
.voice-wave span:nth-child(3) { height:10px; animation-delay:.2s; }
.voice-wave span:nth-child(4) { height:16px; animation-delay:.15s; }
.voice-wave span:nth-child(5) { height:8px; animation-delay:.25s; }
@keyframes wave { 0%,100%{transform:scaleY(.5)} 50%{transform:scaleY(1)} }

/* === MOBILE CHAT (bottom popup) === */
.mobile-chat-trigger {
  display:none; position:fixed; bottom:68px; right:16px;
  width:52px; height:52px; border-radius:50%; background:var(--g);
  color:#fff; border:none; font-size:22px; cursor:pointer;
  box-shadow:0 4px 16px rgba(22,163,74,.3); z-index:200;
  transition:.15s;
}
.mobile-chat-trigger:hover { transform:scale(1.08); }
@media(max-width:767px) { .mobile-chat-trigger { display:flex; align-items:center; justify-content:center; } }
.mobile-chat-trigger .mc-badge {
  position:absolute; top:-2px; right:-2px; width:14px; height:14px;
  background:var(--r); border-radius:50%; font-size:8px; font-weight:700;
  display:flex; align-items:center; justify-content:center;
}

.mobile-chat-panel {
  display:none; position:fixed; bottom:0; left:0; right:0;
  height:65vh; background:var(--s); border-radius:16px 16px 0 0;
  z-index:300; box-shadow:0 -8px 32px rgba(0,0,0,.12);
  flex-direction:column;
}
.mobile-chat-panel.open { display:flex; animation:mChatUp .25s ease; }
@keyframes mChatUp { 0%{transform:translateY(100%)} 100%{transform:translateY(0)} }
.mc-handle { width:36px; height:4px; background:var(--b); border-radius:2px; margin:8px auto; flex-shrink:0; }
.mobile-chat-overlay {
  display:none; position:fixed; inset:0; background:rgba(0,0,0,.2);
  backdrop-filter:blur(2px); z-index:299;
}
.mobile-chat-overlay.open { display:block; }

/* === MOBILE BOTTOM NAV === */
.mobile-nav {
  display:none; position:fixed; bottom:0; left:0; right:0;
  background:var(--s); border-top:1px solid var(--b);
  padding:4px 0 env(safe-area-inset-bottom, 4px);
  z-index:200; box-shadow:0 -2px 8px rgba(0,0,0,.04);
}
@media(max-width:767px) { .mobile-nav { display:flex; justify-content:space-around; } }
.mn-btn {
  display:flex; flex-direction:column; align-items:center; gap:1px;
  padding:4px 14px; border:none; background:none; color:var(--t3);
  font-family:var(--font); font-size:8px; font-weight:600; cursor:pointer;
}
.mn-btn.on { color:var(--g); }
.mn-btn .mn-icon { font-size:18px; }

/* === SETTINGS OVERLAY === */
.settings-overlay {
  display:none; position:fixed; inset:0; z-index:400;
  background:rgba(0,0,0,.3); backdrop-filter:blur(3px);
}
.settings-overlay.open { display:block; }
.settings-panel {
  position:fixed; top:0; right:0; bottom:0; width:320px;
  background:var(--s); box-shadow:-8px 0 32px rgba(0,0,0,.1);
  z-index:401; overflow-y:auto; padding:20px;
  transform:translateX(100%); transition:transform .25s ease;
}
.settings-overlay.open .settings-panel { transform:translateX(0); }
@media(max-width:500px) { .settings-panel { width:100%; } }
.settings-panel h2 { font-family:var(--display); font-size:18px; margin-bottom:16px; }
.setting-group { margin-bottom:16px; }
.setting-group h4 { font-size:9px; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--t3); margin-bottom:6px; }
.setting-row {
  display:flex; align-items:center; justify-content:space-between;
  padding:8px 10px; background:var(--s2); border-radius:6px; margin-bottom:3px; font-size:12px;
}
.setting-row .sr-label { font-weight:500; }
.setting-row .sr-value { font-family:var(--mono); font-size:10px; color:var(--g); }
.toggle-sw {
  width:36px; height:20px; border-radius:10px; background:var(--s3);
  position:relative; cursor:pointer; transition:.2s;
}
.toggle-sw.on { background:var(--g); }
.toggle-sw::after {
  content:''; position:absolute; top:2px; left:2px;
  width:16px; height:16px; border-radius:50%; background:#fff;
  box-shadow:var(--sh); transition:.2s;
}
.toggle-sw.on::after { left:18px; }
.settings-close {
  position:absolute; top:16px; right:16px; width:28px; height:28px;
  border:1px solid var(--b); background:none; border-radius:6px;
  cursor:pointer; font-size:14px; display:flex; align-items:center; justify-content:center;
}

/* Scrollbar */
::-webkit-scrollbar { width:3px; }
::-webkit-scrollbar-thumb { background:var(--b); border-radius:2px; }

/* Utility */
@media(max-width:767px) { .pane-scroll { padding-bottom:72px; } }
